!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="//static.hsappstatic.net/feedback-web-renderer-ui/static-1.2322/";r(r.s=280)}({259:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});var n=/^.*hsappstatic\.net\/feedback-web-renderer-ui\/static-(\d+\.\d+).*$/,o=[].slice.call(document.getElementsByTagName("script")).map(function(e){return e.src}).filter(function(e){return n.test(e)})[0];t.bundleVersion=o?n.exec(o)[1]:"unknown",t.isQa=!/hubspot\.com$/.test(location.host)},267:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.getIgnoredSurveys=t.ignoreSurvey=t.getCoolOffInDays=t.isSurveyIgnored=t.SURVEY_IGNORE_TIMEOUT_DAYS=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=i(r(55)),u=i(r(268)),a=i(r(269));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function c(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function s(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function f(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var l=t.SURVEY_IGNORE_TIMEOUT_DAYS=14,d="FEEDBACK_IGNORED",p="&",v=function(e){var t=localStorage.getItem(e);if(!t)return!1;if(new Date(t)>new Date)return!0;localStorage.removeItem(e);return!1};Object.keys(localStorage||{}).forEach(function(e){0===e.indexOf(d)&&v(e)});var E=t.isSurveyIgnored=function(e,t,r,n){var o=[d,e,t,r].join(p);return n!==u.INFINITE&&v(o)},y=t.getCoolOffInDays=function(e,t){switch(t){case a.MONTHS:return l;case a.WEEKS:return 1===e?7:l;case a.DAYS:default:return e}},_=(t.ignoreSurvey=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.SINGLE,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.DAYS,c=arguments[6];if(!arguments[7]&&!c){var s=[d,e,t,r].join(p);if(n!==u.INFINITE){var f=new Date,v=n===u.INFINITE_WITH_BACKOFF||n===u.MULTIPLE_WITH_BACKOFF?y(o,i):l,E=new Date(f.getTime()+24*v*60*60*1e3);localStorage.setItem(s,E.toISOString())}}},function(e){return new RegExp("FEEDBACK_IGNORED&(CSAT|NPS)&(\\d+)&"+e)});t.getIgnoredSurveys=function(e){var t,r=_(e);return Object.keys(localStorage||{}).reduce(function(t,o){var u=o.match(r);if(null===u)return t;var a=parseInt(u[2],10),i=u[1];if(!E(i,a,e))return t;var l=t[i],d=f(t,[i]);return n({},d,c({},i,[].concat(s(l),[a]).sort()))},(c(t={},o.CSAT,[]),c(t,o.NPS,[]),t))}},268:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.SINGLE="SINGLE",t.INFINITE="INFINITE",t.INFINITE_WITH_BACKOFF="INFINITE_WITH_BACKOFF",t.MULTIPLE="MULTIPLE",t.MULTIPLE_WITH_BACKOFF=" MULTIPLE_WITH_BACKOFF"},269:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.DAYS="DAYS",t.WEEKS="WEEKS",t.MONTHS="MONTHS"},280:function(e,t,r){"use strict";"use es6";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=p(r(39)),u=p(r(42)),a=p(r(259)),i=d(r(281)),c=r(267),s=r(45),f=r(46),l=r(47);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function E(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var y=void 0,_=void 0,O=a.isQa?"qa":"",I="https://feedback."+("hubapi"+O+".com/feedback")+"/public/v1/web-config",b="https://api."+("hubspot"+O+".com/feedback")+"/v1",S=b+"/survey-config/web",g=(0,s.parentSender)(o.FETCHER),T=[],h=void 0,P=function(){var e=(0,c.getIgnoredSurveys)(y.portalId);return Object.keys(e).reduce(function(t,r){return n({},t,E({},"excludedIds."+r,e[r]))},{})},A=function(e){h=!1;C();e.config&&g(u.SURVEY_FETCHED,e)},m=function(e){var t=/csrf.app=([^;]+);?/.exec(e);return t&&t[1]},j=function(e,t){h=!0;var r=y,o=r.customerPortalId,u=r.portalId,c=v(r,["customerPortalId","portalId"]),s=n({},c,{bundleVersion:a.bundleVersion,portalId:o||u}),f=m(window.document.cookie);(0,i.default)(b+"/survey-config/"+e+"/"+t+"?"+(0,l.toQueryParams)(s),A,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","Content-type":"application/json","X-HubSpot-CSRF-hubspotapi":f},withCredentials:!0})},C=function(){if(!h&&0!==T.length){h=!0;var e=T.shift(),t=P(),r=n({},y,{bundleVersion:a.bundleVersion,pageUrl:e},t),o={"X-HS-Referer":e};if(_){var u=m(window.document.cookie);o=n({},o,{Accept:"application/json, text/javascript, */*; q=0.01","Content-type":"application/json","X-HubSpot-CSRF-hubspotapi":u})}var c=_?S:I;(0,i.default)(c+"?"+(0,l.toQueryParams)(r),A,{headers:o,withCredentials:_})}},N=function(e,t){switch(e){case u.SETUP:var r=t.pageUrl,n=t.isHubspot,o=v(t,["pageUrl","isHubspot"]);T.push(r);y=o;_=n;break;case u.LOCATION_CHANGE:T.push(t);break;case u.LOAD_SURVEY:var a=t.surveyType,i=t.surveyId;j(a,i)}C()};(0,f.parentListener)(o.FETCHER)(N);g(u.READY)},281:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.onerror,o=r.headers,u=void 0===o?{}:o,a=r.withCredentials,i=void 0!==a&&a,c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE){var e=c.responseText,r=c.status;r>=200&&r<300?t(JSON.parse(e)):n&&n(c)}};c.open("GET",e);i&&(c.withCredentials=!0);Object.keys(u).forEach(function(e){c.setRequestHeader(e,u[e])});c.send()};e.exports=t.default},39:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.PREVIEW_EDITOR="PREVIEW_EDITOR",t.PREVIEW_UI="PREVIEW_UI",t.FETCHER="FETCHER",t.UI="UI"},42:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.CHANGE_EXPANDED_STATE="change-expand",t.EXPAND="expand",t.FOCUS="focus",t.HIDE="hide",t.LOAD_SURVEY="load-survey",t.LOCATION_CHANGE="location-change",t.PREVIEW="preview",t.READY="ready",t.RESET="reset",t.RESIZE_POPUP="resize-popup",t.SETUP="setup",t.SHOW="show",t.STAGE_CHANGE="stage-change",t.SURVEY_FETCHED="fetched",t.UPDATE="update",t.CHANGE_STATE="CHANGE_STATE",t.UPDATE_PREVIEW="UPDATE_PREVIEW"},45:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.onFrameReady=t.parentSender=t.iframeSender=t.FEEDBACK_TYPE=void 0;var n=r(46),o=u(r(42));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}var a=t.FEEDBACK_TYPE="hubspot-servicehub-feedback",i=function(e,t,r){return function(n,o){t.postMessage(JSON.stringify({payload:{channel:e,payload:{messageType:n,payload:o}},type:a}),r||"*")}},c=t.iframeSender=function(e,t){return i(t,e.contentWindow,e.src)};t.parentSender=function(e){return i(e,window.parent,document.referrer)},t.onFrameReady=function(e,t,r){var u=(0,n.frameListener)(e,t),a=c(e,t),i=u(function(e){if(e===o.READY){r({sender:a,subscribe:u});i()}})}},46:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.frameListener=t.parentListener=void 0;var n=r(45),o=r(47),u=a(r(48));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t){var r=new RegExp("^"+(0,o.getOrigin)(e)),a=(0,u.default)(window,"message");return function(e){return a(function(o){var u=o.data,a=o.origin,i=o.source;if(u&&r.test(a)){var c=void 0;try{c=JSON.parse(u)}catch(e){return}var s=c,f=s.payload,l=s.type;if(f&&l===n.FEEDBACK_TYPE){var d=f.channel,p=f.payload,v=p.messageType,E=p.payload;d===t&&e(v,E,a,i)}}})}};t.parentListener=function(e){return i(document.referrer,e)},t.frameListener=function(e,t){return i(e.src,t)};t.default=i},47:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}t.getOrigin=function(e){if(!e||""===e)return".*";var t=e.split("/");return t[0]+"//"+t[2]};var o=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)};t.toQueryParams=function(e){return Object.keys(e).reduce(function(t,r){var u=e[r];return[].concat(n(t),n(Array.isArray(u)?u.map(function(e){return o(r,e)}):[o(r,u)]))},[]).join("&")}},48:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(49));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n.default)(function(n){e.addEventListener(t,n,r);return function(){e.removeEventListener(t,n,r)}})};e.exports=t.default},49:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=!0,r=[],n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){e.apply(void 0,t)})};return function(o){t&&0===r.length&&(t=e(n));r.push(o);return function(){var e=r.length;r=r.filter(function(e){return e!==o});t&&0===r.length&&e>0&&t()}}};e.exports=t.default},55:function(e,t,r){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});t.CES="CES",t.CSAT="CSAT",t.NPS="NPS"}});
//# sourceMappingURL=fetcher.js.map